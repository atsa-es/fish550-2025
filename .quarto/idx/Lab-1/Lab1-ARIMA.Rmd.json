{"title":"Lab Intro","markdown":{"yaml":{"title":"Lab Intro","subtitle":"Lab 1 Forecasting with ARIMA models","author":"E Holmes","date":"March 22, 2023","output":{"html_document":{"code-folding":true,"toc":true,"toc_float":true}}},"headingText":"Teams","containsRefs":false,"markdown":"\n\n```{r include=FALSE}\nlibrary(tidyverse)\noptions(dplyr.summarise.inform = FALSE)\n```\n\nFor this lab you will use the material you have learned in the first 3 lectures to explore features of time series of salmon in the North Pacific (Alaska and E Asia). Then you will use ARIMA models to create forecasts and ask a research question with those forecasts.\n\n\n1. Bristol Bay Data: Nick Chambers (SAFS), Liz Elmstrom (SAFS), Maria Kuruvilla (QERM)\n2. Bristol Bay Data: Eric French (Civil), Dylan Hubl (ESRM), Miranda Mudge (Molecular & Cell Bio)\n3. Ruggerone & Irvine Data: Zoe Rand (QERM), Madison Shipley (SAFS), Emma Timmins-Schiffman (Genome Sci)\n4. Ruggerone & Irvine Data: Terrance Wang (SAFS), Josh Zahner (SAFS), Karl Veggerby (SAFS)\n\n## References\n\nHolmes, E. E. (2020) Fisheries Catch Forecasting <https://fish-forecast.github.io/Fish-Forecast-Bookdown>\n\nHyndman, R.J., & Athanasopoulos, G. (2018) Forecasting: principles and practice, 2nd edition, OTexts: Melbourne, Australia. <https://otexts.com/fpp2/>.\n\nPlus the lecture material on the ATSA website.\n\n## Type of questions you might ask\n\n\"Compare the accuracy of forecasts using best fit ARIMA models for pink salmon using the different regions in the Ruggerone & Irvine data. Is forecast accuracy is different for different regions?\"\n\n\"Compare the accuracy of total abundance forecasts using ARIMA models for Bristol Bay sockeye rivers and compare to the AKFW and UW FRI forecasts.\"\n\n\"Compare the accuracy of age-group forecasts using ARIMA models for Bristol Bay sockeye and compare to the AKFW and UW FRI forecasts.\"\n\n\"Use the Ruggerone & Irvine data and ARIMA models to study the autoregressive structure of pink, chum and sockeye. Are there differences by region (AK verus E Asia)?\"\n\n\"Compare the forecasts of total North Pacific pink and chum using 5, 10, 15, and 20 years of training data. Does forecast accuracy increase with more training data?\"\n\n\"Create 1-year forecasts of total North Pacific pink salmon using 20 years of training data for all of the Ruggerone and Irvine data. Is forecast error correlated with the PDO?\"\n\n## Bristol Bay Sockeye data\n\nThe `bristol_bay_data_plus_covariates.rds` file has Bristol Bay sockeye abundance for 9 rivers for 4 age-groups. The data are from Ovando et al 2021 Improving forecasts of sockeye salmon (Oncorhynchus nerka) with parametric and nonparametric models DOI: 10.1139/cjfas-2021-0287. You'll find a copy in the lab folder. The data file also has the covariates for year that the smolts enter the ocean as used in Ovando et al. \n\nLoad the data.\n```{r}\nbb_data <- readRDS(here::here(\"Lab-1\", \"Data_Images\", \"bristol_bay_data_plus_covariates.rds\"))\n```\n\nThe data you will most likely want are\n\n* `ret_yr` The year the spawners return to the spawning grounds\n* `ret` The returns (number of fish in 1000s)\n* `system` The river name\n* `age_group` The age_group\n* `forecast.adfw` The forecast from AK Fish and Wildlife\n* `forecast.fri` The forecast from UW Fisheries Research Institute\n* `env_*` are some covariates at the year the age group entered the ocean\n\nIn the data file, the age group designation is \"a.b\" where \"a\" is number of years in freshwater and \"b\" is number of years in the ocean. The age of the spawners in then `a+b`.  \n\n![](Data_Images/BB_sockeye_rivers_inset.png){width=\"50%\"}\n\nThe data\n\n```{r echo=FALSE}\ncat(\"colnames: \", colnames(bb_data), \"\\n\")\ncat(\"system (river): \", unique(bb_data$system), \"\\n\")\ncat(\"age groups: \", unique(bb_data$age_groups), \"\\n\")\n```\n\nSome plots of the Bristol Bay data. Hmm there is a NA that was replaced with 0 it looks like.\n\n```{r fig.cap=\"plotted by age group\"}\nbb_data %>% \n  filter(system==\"Kvichak\") %>% \n  ggplot(aes(x=ret_yr, y=log(ret))) + \n    geom_line() + \n    ggtitle(\"log abundance by age group\") +\n    facet_wrap(~age_group)\n```\n\n```{r fig.cap=\"total across all 4 ages\"}\nbb_data %>% \n  group_by(system, ret_yr) %>%\n  summarize(total = sum(ret, na.rm=TRUE)) %>%\n  ggplot(aes(x=ret_yr, y=log(total))) + \n    geom_line() + \n    ggtitle(\"log abundance by river\") +\n    facet_wrap(~system)\n```\n### Some subsets of the data\n\nHere are some subsets of the data that you might want to use.\n\nLog total by age group\n```{r}\nsubdata <- bb_data %>% \n  group_by(age_group, ret_yr) %>%\n  summarize(lntotal = log(sum(ret, na.rm=TRUE)))\nhead(subdata)\n```\n\nLog total by river\n```{r}\nsubdata <- bb_data %>% \n  group_by(system, ret_yr) %>%\n  summarize(lntotal = log(sum(ret, na.rm=TRUE)))\nhead(subdata)\n```\n\nCompare fish that spend 2 years in ocean versus those that spend 3 years.\n```{r}\nsubdata <- bb_data %>% \n  mutate(\n    ocean_years = case_match(\n      age_group, \n      c(\"2.3\", \"1.3\") ~ \"3-yr-ocean\",\n      c(\"1.2\", \"2.2\") ~ \"2-yr-ocean\",\n      .default = age_group\n    )) %>%\n  group_by(system, ocean_years, ret_yr) %>%\n  summarize(lntotal = log(sum(ret, na.rm=TRUE)))\nhead(subdata)\n```\n\nGet one time series and split into train and test. Each with 10 years.\n```{r}\ndat <- bb_data %>%\n  filter(system == \"Kvichak\", age_group == \"1.3\") %>%\n  mutate(lnreturns = log(ret),\n         year = ret_yr) %>%\n  select(year, lnreturns)\ndatts <- ts(dat$lnreturns, start=dat$year[1])\ntrain <- window(datts, dat$year[1], dat$year[1]+9)\ntest <- window(datts, dat$year[1]+10, dat$year[1]+10+9)\n```\n\n## Ruggerone & Irvine: Salmon in the North Pacific\n\nThe data set `Data_Images/ruggerone_data.rds` has total abundance of natural spawners (not hatchery) from 15 regions in the N Pacific. These are data provided with Ruggerone, G. and Irvine, J. 2018. Numbers and biomass of natural- and hatchery-origin Pink, Chum, and Sockeye Salmon in the North Pacific Ocean, 1925-2015. Marine and Coastal Fisheries: Dynamics, Management, and Ecosystem Science 10. DOI: [10.1002/mcf2.10023](https://afspubs.onlinelibrary.wiley.com/doi/10.1002/mcf2.10023). Open Access.\n\nLoad the data\n```{r}\nruggerone_data <- readRDS(here::here(\"Lab-1\", \"Data_Images\", \"ruggerone_data.rds\"))\n```\n\n![Figure 1. The approximate geographic locations of regional stock groups. Region 1, Washington State, including the Columbia River. Region 2, Southern British Columbia (BC) south of the central coast of British Columbia (\\~51°N). . Region 3, Northern BC including central and northern British Columbia. Region 4, Southeast Alaska (AK) including the Yakutat coast. The Central Alaska region extends from the Bering River (\\~60°N), near Prince William Sound in Region 5, westward to Unimak Island (\\~166°W), thereby including Regions 5 through 8. Western Alaska includes Regions 9 through 12, i.e., all North American drainages flowing into the Bering Sea from Unimak Island to Kotzebue. Data for eastern and western Kamchatka (Regions 14 and 15) are separated from data for the Russian mainland and islands (called \"Mainland & Islands\" here, which includes the Okhotsk coast, Amur River, Primorye, Sakhalin and Kurile Islands, and relatively small runs to the Anadyr). Region 20, Japan, includes the islands of Hokkaido and Honshu. South Korea (Region 21) not shown.](Data_Images/NPacific_map.jpg){width=\"50%\"}\n\n| region in data file    | desciption                  | regions in map    |\n|------------------------|-----------------------------|-------------------|\n| japan                  |  Japan & South Korea        | 20 and 21         |\n| m_i                    | Russian Mainland & Islands  | 13, 16, 17 18, 19 |\n| w_kam                  | Western Kamchatka           | 15                |\n| e_kam                  | Eastern Kamchatka           | 14                |\n| wak                    | Western Alaska              | 9, 10, 11, 12     |\n| s_pen                  | Southern Alaska Peninsula   | 8                 |\n| kod                    | Kodiak                      | 7                 |\n| ci                     | Cook Inlet                  | 6                 |\n| pws                    | Prince William Sound        | 5                 |\n| seak                   | Southeast Alaska            | 4                 |\n| nbc                    | Northern British Columbia   | 3                 |\n| sbc                    | Southern British Columbia   | 2                 |\n| wa                     | Washington State            | 1                 |\n| wc                     | West Coast USA              | mislabeled on map |\n| cak (not in data file) | Central Alaska              | 5, 6, 7, 8        |\n\n### Ruggerone and Irvine data\n\n```{r echo=FALSE}\ncat(\"colnames: \", colnames(ruggerone_data), \"\\n\")\ncat(\"species: \", unique(ruggerone_data$species), \"\\n\")\ncat(\"regions: \", unique(ruggerone_data$region), \"\\n\")\n```\n\n### Some plots of the Ruggerone and Irvine data.\n\n```{r fig.cap=\"pink salmon by regions\"}\nruggerone_data %>% \n  filter(species==\"pink\") %>% \n  ggplot(aes(x=year, y=log(returns))) + \n    geom_line() + \n    ggtitle(\"pink salmon log abundance\") +\n    facet_wrap(~region)\n```\n\n```{r fig.cap=\"total by species\"}\nruggerone_data %>% \n  group_by(species, year) %>%\n  summarize(total = sum(returns, na.rm=TRUE)) %>%\n  ggplot(aes(x=year, y=log(total))) + \n    geom_line() + \n    ggtitle(\"log abundance by species\") +\n    facet_wrap(~species)\n```\n\n### Some subsets of the data\n\nHere are some subsets of the data that you might want to use.\n\nLog total North Pacific pink, chum, sockeye\n```{r}\nsubdata <- ruggerone_data %>% \n  group_by(species, year) %>%\n  summarize(lntotal = log(sum(returns, na.rm=TRUE)))\nhead(subdata)\n```\n\nLog North Pacific pink\n```{r}\nsubdata <- ruggerone_data %>% \n  filter(species == \"pink\") %>%\n mutate(lnreturns = log(returns))\nhead(subdata)\n```\n\nTotal in some bigger areas\n```{r}\nsubdata <- ruggerone_data %>% \n  mutate(\n    area = case_match(\n      region, \n      c(\"japan\", \"korea\", \"m_i\", \"e_kam\", \"w_kam\") ~ \"East_Asia\",\n      c(\"wak\", \"s_pen\", \"kod\", \"ci\", \"pws\", \"seak\") ~ \"Alaska\",\n      c(\"nbc\", \"sbc\", \"wa\", \"wc\") ~ \"WC\",\n      .default = region\n    )) %>%\n  group_by(area, species, year) %>%\n  summarize(lntotal = log(sum(returns, na.rm=TRUE)))\nhead(subdata)\n```\n\n## Example analysis\n\nGet one time series out of `ruggerone_data`\n```{r}\ndat <- ruggerone_data %>%\n  filter(region == \"wak\", species == \"pink\") %>%\n  mutate(lnreturns = log(returns)) %>%\n  select(year, lnreturns)\nhead(dat)\n```\n\nMake a time series object and divide into train and test data.\n```{r}\ndatts <- ts(dat$lnreturns, start=dat$year[1])\ntrain <- window(datts, 1952, 1971)\ntest <- window(datts, 1972, 2001)\n```\n\n\nFit a model with `auto.arima()` in the forecast package.\n```{r message=FALSE}\nlibrary(forecast)\nmod <- auto.arima(train)\nmod\n```\n\nPlot a 30-year forecast against the test data.\n```{r}\nlibrary(zoo)\nfr <- forecast(mod, h=30)\nautoplot(fr) + geom_point(aes(x=x, y=y), data=fortify(test))\n```\n","srcMarkdownNoYaml":"\n\n```{r include=FALSE}\nlibrary(tidyverse)\noptions(dplyr.summarise.inform = FALSE)\n```\n\nFor this lab you will use the material you have learned in the first 3 lectures to explore features of time series of salmon in the North Pacific (Alaska and E Asia). Then you will use ARIMA models to create forecasts and ask a research question with those forecasts.\n\n## Teams\n\n1. Bristol Bay Data: Nick Chambers (SAFS), Liz Elmstrom (SAFS), Maria Kuruvilla (QERM)\n2. Bristol Bay Data: Eric French (Civil), Dylan Hubl (ESRM), Miranda Mudge (Molecular & Cell Bio)\n3. Ruggerone & Irvine Data: Zoe Rand (QERM), Madison Shipley (SAFS), Emma Timmins-Schiffman (Genome Sci)\n4. Ruggerone & Irvine Data: Terrance Wang (SAFS), Josh Zahner (SAFS), Karl Veggerby (SAFS)\n\n## References\n\nHolmes, E. E. (2020) Fisheries Catch Forecasting <https://fish-forecast.github.io/Fish-Forecast-Bookdown>\n\nHyndman, R.J., & Athanasopoulos, G. (2018) Forecasting: principles and practice, 2nd edition, OTexts: Melbourne, Australia. <https://otexts.com/fpp2/>.\n\nPlus the lecture material on the ATSA website.\n\n## Type of questions you might ask\n\n\"Compare the accuracy of forecasts using best fit ARIMA models for pink salmon using the different regions in the Ruggerone & Irvine data. Is forecast accuracy is different for different regions?\"\n\n\"Compare the accuracy of total abundance forecasts using ARIMA models for Bristol Bay sockeye rivers and compare to the AKFW and UW FRI forecasts.\"\n\n\"Compare the accuracy of age-group forecasts using ARIMA models for Bristol Bay sockeye and compare to the AKFW and UW FRI forecasts.\"\n\n\"Use the Ruggerone & Irvine data and ARIMA models to study the autoregressive structure of pink, chum and sockeye. Are there differences by region (AK verus E Asia)?\"\n\n\"Compare the forecasts of total North Pacific pink and chum using 5, 10, 15, and 20 years of training data. Does forecast accuracy increase with more training data?\"\n\n\"Create 1-year forecasts of total North Pacific pink salmon using 20 years of training data for all of the Ruggerone and Irvine data. Is forecast error correlated with the PDO?\"\n\n## Bristol Bay Sockeye data\n\nThe `bristol_bay_data_plus_covariates.rds` file has Bristol Bay sockeye abundance for 9 rivers for 4 age-groups. The data are from Ovando et al 2021 Improving forecasts of sockeye salmon (Oncorhynchus nerka) with parametric and nonparametric models DOI: 10.1139/cjfas-2021-0287. You'll find a copy in the lab folder. The data file also has the covariates for year that the smolts enter the ocean as used in Ovando et al. \n\nLoad the data.\n```{r}\nbb_data <- readRDS(here::here(\"Lab-1\", \"Data_Images\", \"bristol_bay_data_plus_covariates.rds\"))\n```\n\nThe data you will most likely want are\n\n* `ret_yr` The year the spawners return to the spawning grounds\n* `ret` The returns (number of fish in 1000s)\n* `system` The river name\n* `age_group` The age_group\n* `forecast.adfw` The forecast from AK Fish and Wildlife\n* `forecast.fri` The forecast from UW Fisheries Research Institute\n* `env_*` are some covariates at the year the age group entered the ocean\n\nIn the data file, the age group designation is \"a.b\" where \"a\" is number of years in freshwater and \"b\" is number of years in the ocean. The age of the spawners in then `a+b`.  \n\n![](Data_Images/BB_sockeye_rivers_inset.png){width=\"50%\"}\n\nThe data\n\n```{r echo=FALSE}\ncat(\"colnames: \", colnames(bb_data), \"\\n\")\ncat(\"system (river): \", unique(bb_data$system), \"\\n\")\ncat(\"age groups: \", unique(bb_data$age_groups), \"\\n\")\n```\n\nSome plots of the Bristol Bay data. Hmm there is a NA that was replaced with 0 it looks like.\n\n```{r fig.cap=\"plotted by age group\"}\nbb_data %>% \n  filter(system==\"Kvichak\") %>% \n  ggplot(aes(x=ret_yr, y=log(ret))) + \n    geom_line() + \n    ggtitle(\"log abundance by age group\") +\n    facet_wrap(~age_group)\n```\n\n```{r fig.cap=\"total across all 4 ages\"}\nbb_data %>% \n  group_by(system, ret_yr) %>%\n  summarize(total = sum(ret, na.rm=TRUE)) %>%\n  ggplot(aes(x=ret_yr, y=log(total))) + \n    geom_line() + \n    ggtitle(\"log abundance by river\") +\n    facet_wrap(~system)\n```\n### Some subsets of the data\n\nHere are some subsets of the data that you might want to use.\n\nLog total by age group\n```{r}\nsubdata <- bb_data %>% \n  group_by(age_group, ret_yr) %>%\n  summarize(lntotal = log(sum(ret, na.rm=TRUE)))\nhead(subdata)\n```\n\nLog total by river\n```{r}\nsubdata <- bb_data %>% \n  group_by(system, ret_yr) %>%\n  summarize(lntotal = log(sum(ret, na.rm=TRUE)))\nhead(subdata)\n```\n\nCompare fish that spend 2 years in ocean versus those that spend 3 years.\n```{r}\nsubdata <- bb_data %>% \n  mutate(\n    ocean_years = case_match(\n      age_group, \n      c(\"2.3\", \"1.3\") ~ \"3-yr-ocean\",\n      c(\"1.2\", \"2.2\") ~ \"2-yr-ocean\",\n      .default = age_group\n    )) %>%\n  group_by(system, ocean_years, ret_yr) %>%\n  summarize(lntotal = log(sum(ret, na.rm=TRUE)))\nhead(subdata)\n```\n\nGet one time series and split into train and test. Each with 10 years.\n```{r}\ndat <- bb_data %>%\n  filter(system == \"Kvichak\", age_group == \"1.3\") %>%\n  mutate(lnreturns = log(ret),\n         year = ret_yr) %>%\n  select(year, lnreturns)\ndatts <- ts(dat$lnreturns, start=dat$year[1])\ntrain <- window(datts, dat$year[1], dat$year[1]+9)\ntest <- window(datts, dat$year[1]+10, dat$year[1]+10+9)\n```\n\n## Ruggerone & Irvine: Salmon in the North Pacific\n\nThe data set `Data_Images/ruggerone_data.rds` has total abundance of natural spawners (not hatchery) from 15 regions in the N Pacific. These are data provided with Ruggerone, G. and Irvine, J. 2018. Numbers and biomass of natural- and hatchery-origin Pink, Chum, and Sockeye Salmon in the North Pacific Ocean, 1925-2015. Marine and Coastal Fisheries: Dynamics, Management, and Ecosystem Science 10. DOI: [10.1002/mcf2.10023](https://afspubs.onlinelibrary.wiley.com/doi/10.1002/mcf2.10023). Open Access.\n\nLoad the data\n```{r}\nruggerone_data <- readRDS(here::here(\"Lab-1\", \"Data_Images\", \"ruggerone_data.rds\"))\n```\n\n![Figure 1. The approximate geographic locations of regional stock groups. Region 1, Washington State, including the Columbia River. Region 2, Southern British Columbia (BC) south of the central coast of British Columbia (\\~51°N). . Region 3, Northern BC including central and northern British Columbia. Region 4, Southeast Alaska (AK) including the Yakutat coast. The Central Alaska region extends from the Bering River (\\~60°N), near Prince William Sound in Region 5, westward to Unimak Island (\\~166°W), thereby including Regions 5 through 8. Western Alaska includes Regions 9 through 12, i.e., all North American drainages flowing into the Bering Sea from Unimak Island to Kotzebue. Data for eastern and western Kamchatka (Regions 14 and 15) are separated from data for the Russian mainland and islands (called \"Mainland & Islands\" here, which includes the Okhotsk coast, Amur River, Primorye, Sakhalin and Kurile Islands, and relatively small runs to the Anadyr). Region 20, Japan, includes the islands of Hokkaido and Honshu. South Korea (Region 21) not shown.](Data_Images/NPacific_map.jpg){width=\"50%\"}\n\n| region in data file    | desciption                  | regions in map    |\n|------------------------|-----------------------------|-------------------|\n| japan                  |  Japan & South Korea        | 20 and 21         |\n| m_i                    | Russian Mainland & Islands  | 13, 16, 17 18, 19 |\n| w_kam                  | Western Kamchatka           | 15                |\n| e_kam                  | Eastern Kamchatka           | 14                |\n| wak                    | Western Alaska              | 9, 10, 11, 12     |\n| s_pen                  | Southern Alaska Peninsula   | 8                 |\n| kod                    | Kodiak                      | 7                 |\n| ci                     | Cook Inlet                  | 6                 |\n| pws                    | Prince William Sound        | 5                 |\n| seak                   | Southeast Alaska            | 4                 |\n| nbc                    | Northern British Columbia   | 3                 |\n| sbc                    | Southern British Columbia   | 2                 |\n| wa                     | Washington State            | 1                 |\n| wc                     | West Coast USA              | mislabeled on map |\n| cak (not in data file) | Central Alaska              | 5, 6, 7, 8        |\n\n### Ruggerone and Irvine data\n\n```{r echo=FALSE}\ncat(\"colnames: \", colnames(ruggerone_data), \"\\n\")\ncat(\"species: \", unique(ruggerone_data$species), \"\\n\")\ncat(\"regions: \", unique(ruggerone_data$region), \"\\n\")\n```\n\n### Some plots of the Ruggerone and Irvine data.\n\n```{r fig.cap=\"pink salmon by regions\"}\nruggerone_data %>% \n  filter(species==\"pink\") %>% \n  ggplot(aes(x=year, y=log(returns))) + \n    geom_line() + \n    ggtitle(\"pink salmon log abundance\") +\n    facet_wrap(~region)\n```\n\n```{r fig.cap=\"total by species\"}\nruggerone_data %>% \n  group_by(species, year) %>%\n  summarize(total = sum(returns, na.rm=TRUE)) %>%\n  ggplot(aes(x=year, y=log(total))) + \n    geom_line() + \n    ggtitle(\"log abundance by species\") +\n    facet_wrap(~species)\n```\n\n### Some subsets of the data\n\nHere are some subsets of the data that you might want to use.\n\nLog total North Pacific pink, chum, sockeye\n```{r}\nsubdata <- ruggerone_data %>% \n  group_by(species, year) %>%\n  summarize(lntotal = log(sum(returns, na.rm=TRUE)))\nhead(subdata)\n```\n\nLog North Pacific pink\n```{r}\nsubdata <- ruggerone_data %>% \n  filter(species == \"pink\") %>%\n mutate(lnreturns = log(returns))\nhead(subdata)\n```\n\nTotal in some bigger areas\n```{r}\nsubdata <- ruggerone_data %>% \n  mutate(\n    area = case_match(\n      region, \n      c(\"japan\", \"korea\", \"m_i\", \"e_kam\", \"w_kam\") ~ \"East_Asia\",\n      c(\"wak\", \"s_pen\", \"kod\", \"ci\", \"pws\", \"seak\") ~ \"Alaska\",\n      c(\"nbc\", \"sbc\", \"wa\", \"wc\") ~ \"WC\",\n      .default = region\n    )) %>%\n  group_by(area, species, year) %>%\n  summarize(lntotal = log(sum(returns, na.rm=TRUE)))\nhead(subdata)\n```\n\n## Example analysis\n\nGet one time series out of `ruggerone_data`\n```{r}\ndat <- ruggerone_data %>%\n  filter(region == \"wak\", species == \"pink\") %>%\n  mutate(lnreturns = log(returns)) %>%\n  select(year, lnreturns)\nhead(dat)\n```\n\nMake a time series object and divide into train and test data.\n```{r}\ndatts <- ts(dat$lnreturns, start=dat$year[1])\ntrain <- window(datts, 1952, 1971)\ntest <- window(datts, 1972, 2001)\n```\n\n\nFit a model with `auto.arima()` in the forecast package.\n```{r message=FALSE}\nlibrary(forecast)\nmod <- auto.arima(train)\nmod\n```\n\nPlot a 30-year forecast against the test data.\n```{r}\nlibrary(zoo)\nfr <- forecast(mod, h=30)\nautoplot(fr) + geom_point(aes(x=x, y=y), data=fortify(test))\n```\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":"auto","echo":true,"output":{"html_document":{"code-folding":true,"toc":true,"toc_float":true}},"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"code-overflow":"wrap","engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":true,"code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":true,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","toc":true,"output-file":"Lab1-ARIMA.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.6.39","theme":"cosmo","number-depth":0,"title":"Lab Intro","subtitle":"Lab 1 Forecasting with ARIMA models","author":"E Holmes","date":"March 22, 2023"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}